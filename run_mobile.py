#!/usr/bin/env python3
"""
–§–∞–π–ª –∑–∞–ø—É—Å–∫–∞ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
–ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä —Å –¥–æ—Å—Ç—É–ø–æ–º –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
"""

import os
import socket
from app import app

def get_local_ip():
    """–ü–æ–ª—É—á–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å"""
    try:
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è IP
        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        s.connect(("8.8.8.8", 80))
        local_ip = s.getsockname()[0]
        s.close()
        return local_ip
    except Exception:
        return "127.0.0.1"

if __name__ == '__main__':
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    host = '0.0.0.0'  # –î–æ—Å—Ç—É–ø —Å–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
    port = int(os.environ.get('FLASK_PORT', 5000))
    debug = True
    
    local_ip = get_local_ip()
    
    print("üì± –ó–ê–ü–£–°–ö –°–ï–†–í–ï–†–ê –î–õ–Ø –ú–û–ë–ò–õ–¨–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø")
    print("=" * 50)
    print(f"üñ•Ô∏è  –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å: http://127.0.0.1:{port}")
    print(f"üì± –ú–æ–±–∏–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å: http://{local_ip}:{port}")
    print("=" * 50)
    print("üí° –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:")
    print("   1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–º–ø—å—é—Ç–µ—Ä –∏ —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –æ–¥–Ω–æ–π Wi-Fi —Å–µ—Ç–∏")
    print(f"   2. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ: http://{local_ip}:{port}")
    print("   3. –ò–ª–∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)")
    print("=" * 50)
    print("üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:")
    print("   ‚Ä¢ Chrome: F12 ‚Üí –∏–∫–æ–Ω–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ üì±")
    print("   ‚Ä¢ Firefox: F12 ‚Üí –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω")
    print("   ‚Ä¢ Safari: Develop ‚Üí Responsive Design Mode")
    print("=" * 50)
    
    app.run(
        host=host,
        port=port,
        debug=debug
    ) 